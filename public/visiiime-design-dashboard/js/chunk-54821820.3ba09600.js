(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54821820"],{"3a82":function(t,a,e){"use strict";e("6138")},6138:function(t,a,e){},c740:function(t,a,e){"use strict";var n=e("23e7"),r=e("b727").findIndex,i=e("44d2"),s="findIndex",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},f7bc:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mb-3"},[e("div",{staticClass:"text-center bg-gray-500 text-white py-1"},[t._v("連結分析")]),t.hasPermission?e("div",{staticClass:"p-5"},[t.loaded?e("LineChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,"start-at":t.startAt,"end-at":t.endAt}}):t._e(),e("div",{staticClass:"p-5 pt-0 pb-0 text-center"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.$modal.show("linkItemChartModal"+t.linkItem.id)}}},[t._v("查看更多")])])],1):e("div",{staticClass:"p-5"},[t._v(" You don't have the permission. ")]),e("modal",{attrs:{name:"linkItemChartModal"+t.linkItem.id,"max-width":600,width:"90%",height:"auto",adaptive:!0}},[e("v-card",[e("div",{staticClass:"mb-2"},[e("v-tag",{staticClass:"text-lg py-2 cursor-pointer mr-1",attrs:{"tag-name":"h1",variant:"badge"},nativeOn:{click:function(a){return t.changeChart("country")}}},[t._v("國家")]),e("v-tag",{staticClass:"text-lg py-2 cursor-pointer mr-1",attrs:{"tag-name":"h1",variant:"badge"},nativeOn:{click:function(a){return t.changeChart("browser")}}},[t._v("瀏覽器")]),e("v-tag",{staticClass:"text-lg py-2 cursor-pointer mr-1",attrs:{"tag-name":"h1",variant:"badge"},nativeOn:{click:function(a){return t.changeChart("system")}}},[t._v("系統")]),e("v-tag",{staticClass:"text-lg py-2 cursor-pointer",attrs:{"tag-name":"h1",variant:"badge"},nativeOn:{click:function(a){return t.changeChart("lang")}}},[t._v("語系")]),e("v-tag",{staticClass:"text-lg py-2 cursor-pointer",attrs:{"tag-name":"h1",variant:"badge"},nativeOn:{click:function(a){return t.changeChart("device")}}},[t._v("裝置")])],1),e("div"),e("div",{key:t.componentKey},["country"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"國家","data-name":"country","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"browser"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"瀏覽器","data-name":"browser","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"system"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"系統","data-name":"system","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"lang"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"語系","data-name":"lang","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"device"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"裝置","data-name":"device","start-at":t.startAt,"end-at":t.endAt}})],1):t._e()])])],1)],1)},r=[],i=e("1da1"),s=e("ade3"),c=(e("96cf"),e("a9e3"),e("c740"),e("fb6a"),e("334b")),u=e("bff4"),o=e("c1df"),d=e.n(o),l=e("16aa"),h=e("881a"),m=e("5aea"),v=e("4409"),p={components:{LineChart:c["a"],PieChart:u["a"]},data:function(){return{anaData:[],currentChart:"country",loaded:!1,componentKey:0}},props:{idx:{type:Number,required:!0},linkItem:{type:h["a"],required:!0}},computed:{hasPermission:function(){return this.$store.getters.hasPermission(v["b"])},startAt:function(){var t=d()().subtract(6,"days").format("YYYY-MM-DD");return t},endAt:function(){var t=d()().format("YYYY-MM-DD");return t}},methods:{setData:function(t,a,e){var n,r=this[e].findIndex((function(e){return e[a]===t[a]}));-1===r?this[e].push((n={},Object(s["a"])(n,a,t[a]),Object(s["a"])(n,"count",1),n)):this[e][r].count++},sortList:function(t){var a=this[t].slice().sort((function(t,a){return t.count<a.count?1:t.count>a.count?-1:0}));return a},changeChart:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.currentChart=t,e.next=3,a.updateComponent();case 3:case"end":return e.stop()}}),e)})))()},updateComponent:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.componentKey+=1;case 1:case"end":return a.stop()}}),a)})))()},getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l["a"].getEventData({model_id:t.linkItem.id,start_at:t.startAt,end_at:t.endAt,event_type:m["b"].click,is_parent:!1});case 2:return e=a.sent,n=e.data,a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getData();case 2:t.anaData=a.sent,t.loaded=!0;case 4:case"end":return a.stop()}}),a)})))()}},f=p,g=(e("3a82"),e("2877")),C=Object(g["a"])(f,n,r,!1,null,null,null);a["default"]=C.exports}}]);
//# sourceMappingURL=chunk-54821820.3ba09600.js.map