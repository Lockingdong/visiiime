(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54821820"],{"3a82":function(t,a,e){"use strict";e("6138")},6138:function(t,a,e){},c740:function(t,a,e){"use strict";var n=e("23e7"),r=e("b727").findIndex,s=e("44d2"),i="findIndex",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(i)},f7bc:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mb-3"},[e("div",{staticClass:"text-center bg-gray-500 text-white py-1"},[t._v("連結點擊分析")]),t.hasPermission?e("div",{staticClass:"p-5"},[t.loaded?e("LineChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,"start-at":t.startAt,"end-at":t.endAt}}):t._e(),e("div",{staticClass:"p-5 pt-5 pb-0 text-center"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.$modal.show("linkItemChartModal"+t.linkItem.id)}}},[t._v("查看更多")])])],1):e("div",{staticClass:"p-5"},[e("normal-alert")],1),e("modal",{attrs:{name:"linkItemChartModal"+t.linkItem.id,"max-width":600,width:"90%",height:"auto",adaptive:!0}},[e("div",{staticClass:"card shadow-md bg-white py-3 px-4"},[e("div",{staticClass:"tabs tabs-boxed justify-center"},[e("span",{staticClass:"tab",class:{"tab-active":"country"===t.currentChart},on:{click:function(a){return t.changeChart("country")}}},[t._v("國家")]),e("span",{staticClass:"tab",class:{"tab-active":"browser"===t.currentChart},on:{click:function(a){return t.changeChart("browser")}}},[t._v("瀏覽器")]),e("span",{staticClass:"tab",class:{"tab-active":"system"===t.currentChart},on:{click:function(a){return t.changeChart("system")}}},[t._v("系統")]),e("span",{staticClass:"tab",class:{"tab-active":"lang"===t.currentChart},on:{click:function(a){return t.changeChart("lang")}}},[t._v("語系")]),e("span",{staticClass:"tab",class:{"tab-active":"device"===t.currentChart},on:{click:function(a){return t.changeChart("device")}}},[t._v("裝置")])]),e("div",{staticClass:"mb-2"}),e("div"),e("div",{key:t.componentKey},["country"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"國家","data-name":"country","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"browser"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"瀏覽器","data-name":"browser","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"system"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"系統","data-name":"system","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"lang"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"語系","data-name":"lang","start-at":t.startAt,"end-at":t.endAt}})],1):t._e(),"device"===t.currentChart?e("div",[e("PieChart",{staticClass:"flex-1 min-w-0",attrs:{"ana-data":t.anaData,title:"裝置","data-name":"device","start-at":t.startAt,"end-at":t.endAt}})],1):t._e()])])])],1)},r=[],s=e("1da1"),i=e("ade3"),c=(e("96cf"),e("a9e3"),e("c740"),e("fb6a"),e("334b")),u=e("bff4"),o=e("c1df"),d=e.n(o),l=e("16aa"),h=e("881a"),m=e("b005"),f=e("5aea"),p=e("4409"),v={components:{LineChart:c["a"],PieChart:u["a"],NormalAlert:m["a"]},data:function(){return{anaData:[],currentChart:"country",loaded:!1,componentKey:0}},props:{idx:{type:Number,required:!0},linkItem:{type:h["a"],required:!0}},computed:{hasPermission:function(){return this.$store.getters.hasPermission(p["d"])},startAt:function(){var t=d()().subtract(6,"days").format("YYYY-MM-DD");return t},endAt:function(){var t=d()().format("YYYY-MM-DD");return t}},methods:{setData:function(t,a,e){var n,r=this[e].findIndex((function(e){return e[a]===t[a]}));-1===r?this[e].push((n={},Object(i["a"])(n,a,t[a]),Object(i["a"])(n,"count",1),n)):this[e][r].count++},sortList:function(t){var a=this[t].slice().sort((function(t,a){return t.count<a.count?1:t.count>a.count?-1:0}));return a},changeChart:function(t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.currentChart=t,e.next=3,a.updateComponent();case 3:case"end":return e.stop()}}),e)})))()},updateComponent:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.componentKey+=1;case 1:case"end":return a.stop()}}),a)})))()},getData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.hasPermission){a.next=2;break}return a.abrupt("return",[]);case 2:return a.next=4,l["a"].getEventData({model_id:t.linkItem.id,start_at:t.startAt,end_at:t.endAt,event_type:f["c"].click,is_parent:!1});case 4:return e=a.sent,n=e.data,a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getData();case 2:t.anaData=a.sent,t.loaded=!0;case 4:case"end":return a.stop()}}),a)})))()}},C=v,b=(e("3a82"),e("2877")),w=Object(b["a"])(C,n,r,!1,null,null,null);a["default"]=w.exports}}]);
//# sourceMappingURL=chunk-54821820.f77e7319.js.map