{"version":3,"sources":["webpack:///./src/components/design/linkItemList/linkItem/LinkItemNormal.vue?12dd","webpack:///src/components/design/linkItemList/linkItem/LinkItemNormal.vue","webpack:///./src/components/design/linkItemList/linkItem/LinkItemNormal.vue?cc1b","webpack:///./src/components/design/linkItemList/linkItem/LinkItemNormal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","directives","name","rawName","value","linkItem","mediaName","expression","_v","_s","scopedSlots","_u","key","fn","errors","class","length","online","domProps","on","$event","target","composing","$set","modifiers","updateLink","linkType","linkTypeEnum","media","_q","mediaOpenType","_e","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACE,IAAI,MAAMC,YAAY,MAAMC,MAAM,CAAC,IAAM,QAAQ,CAACJ,EAAG,OAAO,CAACK,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAkC,OAA3BZ,EAAIa,SAASC,WAAiD,KAA3Bd,EAAIa,SAASC,UAAkBC,WAAW,6DAA6DR,YAAY,8CAA8C,CAACP,EAAIgB,GAAG,OAAOhB,EAAIiB,GAAGjB,EAAIa,SAASC,WAAW,SAASV,EAAG,MAAM,CAACG,YAAY,yCAAyC,CAACH,EAAG,MAAM,CAACG,YAAY,8DAA8DC,MAAM,CAAC,MAAQ,6BAA6B,QAAU,YAAY,KAAO,iBAAiB,CAACJ,EAAG,OAAO,CAACI,MAAM,CAAC,EAAI,+HAA+HJ,EAAG,MAAM,CAACG,YAAY,sBAAsBC,MAAM,CAAC,MAAQ,WAAW,KAAO,OAAO,IAAM,OAAOU,YAAYlB,EAAImB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASf,GACx+B,IAAIgB,EAAShB,EAAIgB,OACjB,MAAO,CAAClB,EAAG,QAAQ,CAACK,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOZ,EAAIa,SAAiB,SAAEE,WAAW,sBAAsBR,YAAY,gCAAgCgB,MAAM,CAAC,cAAiC,IAAlBD,EAAOE,QAAchB,MAAM,CAAC,SAAWR,EAAIa,SAASY,OAAO,KAAO,OAAO,aAAe,MAAM,YAAc,QAAQC,SAAS,CAAC,MAAS1B,EAAIa,SAAiB,UAAGc,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOC,OAAOC,WAAqB9B,EAAI+B,KAAK/B,EAAIa,SAAU,WAAYe,EAAOC,OAAOjB,WAAWR,EAAG,MAAM,CAACA,EAAG,OAAO,CAACK,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOU,EAAa,OAAEP,WAAW,kBAAkBR,YAAY,+BAA+B,CAACP,EAAIgB,GAAGhB,EAAIiB,GAAGK,EAAO,iBAAiB,GAAGlB,EAAG,MAAM,CAACG,YAAY,yCAAyC,CAACH,EAAG,MAAM,CAACG,YAAY,8DAA8DC,MAAM,CAAC,MAAQ,6BAA6B,QAAU,YAAY,KAAO,iBAAiB,CAACJ,EAAG,OAAO,CAACI,MAAM,CAAC,YAAY,UAAU,EAAI,iTAAiT,YAAY,eAAeJ,EAAG,MAAM,CAACG,YAAY,sBAAsBC,MAAM,CAAC,MAAQ,eAAe,KAAO,KAAK,IAAM,OAAOU,YAAYlB,EAAImB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASf,GAC/5C,IAAIgB,EAAShB,EAAIgB,OACjB,MAAO,CAAClB,EAAG,QAAQ,CAACK,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,eAAeC,MAAOZ,EAAIa,SAAa,KAAEE,WAAW,gBAAgBiB,UAAU,CAAC,MAAO,KAAQzB,YAAY,gCAAgCgB,MAAM,CAAC,cAAiC,IAAlBD,EAAOE,QAAchB,MAAM,CAAC,SAAWR,EAAIa,SAASY,OAAO,KAAO,OAAO,aAAe,MAAM,YAAc,0BAA0B,SAAW,IAAIC,SAAS,CAAC,MAAS1B,EAAIa,SAAa,MAAGc,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAO5B,EAAIiC,cAAc,OAAS,SAASL,GAAQ,OAAO5B,EAAI+B,KAAK/B,EAAIa,SAAU,OAAQe,EAAOC,OAAOjB,WAAWR,EAAG,MAAM,CAACA,EAAG,OAAO,CAACK,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOU,EAAa,OAAEP,WAAW,kBAAkBR,YAAY,+BAA+B,CAACP,EAAIgB,GAAGhB,EAAIiB,GAAGK,EAAO,iBAAiB,GAAItB,EAAIa,SAASqB,WAAalC,EAAImC,aAAaC,MAAOhC,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACG,YAAY,4BAA4B,CAACH,EAAG,QAAQ,CAACK,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOZ,EAAIa,SAAsB,cAAEE,WAAW,2BAA2BR,YAAY,0CAA0CC,MAAM,CAAC,SAAWR,EAAIa,SAASY,OAAO,MAAQ,MAAM,KAAO,SAASC,SAAS,CAAC,QAAU1B,EAAIqC,GAAGrC,EAAIa,SAASyB,cAAc,QAAQX,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAO5B,EAAI+B,KAAK/B,EAAIa,SAAU,gBAAiB,WAAWT,EAAG,OAAO,CAACG,YAAY,gBAAgB,CAACP,EAAIgB,GAAG,YAAYZ,EAAG,QAAQ,CAACG,YAAY,iCAAiC,CAACH,EAAG,QAAQ,CAACK,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOZ,EAAIa,SAAsB,cAAEE,WAAW,2BAA2BR,YAAY,0CAA0CC,MAAM,CAAC,SAAWR,EAAIa,SAASY,OAAO,MAAQ,MAAM,KAAO,SAASC,SAAS,CAAC,QAAU1B,EAAIqC,GAAGrC,EAAIa,SAASyB,cAAc,QAAQX,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAO5B,EAAI+B,KAAK/B,EAAIa,SAAU,gBAAiB,WAAWT,EAAG,OAAO,CAACG,YAAY,gBAAgB,CAACP,EAAIgB,GAAG,eAAehB,EAAIuC,QAC9yDC,EAAkB,G,4HCoEtB,GACE,WAAF,CACI,GAAJ,QAEE,KAJF,WAKI,MAAJ,CACM,aAAN,OACM,aAAN,OACM,kBAAN,OACM,aAAN,qCAGE,MAAF,CACI,SAAJ,CACM,KAAN,OACM,UAAN,GAEI,IAAJ,CACM,KAAN,OACM,UAAN,GAEI,OAAJ,CACM,KAAN,QACM,UAAN,IAGE,SAAF,CACI,UADJ,WAEM,MAAN,sBAGE,QAAF,CACI,SADJ,WACM,IAAN,OAAM,OAAN,qDAAQ,IAAR,IAAQ,OAAR,0FAEA,uCAFA,UAEA,EAFA,OAGA,EAHA,uBAKgB,EAAhB,mBACgB,EAAhB,4BANA,0CAUA,uBAVA,OAUA,EAVA,OAWA,GAKA,oBACA,qBACA,gCANA,qBACA,oBACA,+BAdA,+CAqBI,WAtBJ,WAsBM,IAAN,OAAM,OAAN,qDAAQ,IAAR,EAAQ,OAAR,0FAEA,gCAFA,OAEA,EAFA,OAIA,eAEA,oDAKA,yCACA,uCALA,0CACA,oCACA,2BATA,8CAmBI,YAzCJ,SAyCA,GACM,KAAN,uBAGE,MAAF,CACI,OADJ,SACA,KACA,EACQ,KAAR,WAEQ,KAAR,qBAIE,QArFF,WAsFA,sBACM,KAAN,aChKqY,I,YCOjYC,EAAY,eACd,EACA1C,EACAyC,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-2d0d05f7.7d32cb3e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-ob',{ref:\"vob\",staticClass:\"p-2\",attrs:{\"tag\":\"div\"}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.linkItem.mediaName !== null && _vm.linkItem.mediaName !== ''),expression:\"linkItem.mediaName !== null && linkItem.mediaName !== ''\"}],staticClass:\"badge badge-success text-xs mt-1 mr-1 mb-1\"},[_vm._v(\"偵測為 \"+_vm._s(_vm.linkItem.mediaName)+\" 連結\")]),_c('div',{staticClass:\"flex justify-center align-middle mb-3\"},[_c('svg',{staticClass:\"mr-1 h-5 w-5 mt-1 text-gray-600 fill-current cursor-pointer\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 20 20\",\"fill\":\"currentColor\"}},[_c('path',{attrs:{\"d\":\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\"}})]),_c('v-p',{staticClass:\"form-control w-full\",attrs:{\"rules\":\"required\",\"name\":\"連結名稱\",\"tag\":\"div\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.linkItem.linkName),expression:\"linkItem.linkName\"}],staticClass:\"input input-sm input-bordered\",class:{'input-error': errors.length !== 0},attrs:{\"disabled\":_vm.linkItem.online,\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"連結名稱\"},domProps:{\"value\":(_vm.linkItem.linkName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.linkItem, \"linkName\", $event.target.value)}}}),_c('div',[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(errors.length),expression:\"errors.length\"}],staticClass:\"badge badge-error mt-1 mr-1\"},[_vm._v(_vm._s(errors[0]))])])]}}])})],1),_c('div',{staticClass:\"flex justify-center align-middle mb-3\"},[_c('svg',{staticClass:\"mr-1 h-5 w-5 mt-1 text-gray-600 fill-current cursor-pointer\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 20 20\",\"fill\":\"currentColor\"}},[_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"d\":\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\",\"clip-rule\":\"evenodd\"}})]),_c('v-p',{staticClass:\"form-control w-full\",attrs:{\"rules\":\"required|url\",\"name\":\"網址\",\"tag\":\"div\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy\",value:(_vm.linkItem.link),expression:\"linkItem.link\",modifiers:{\"lazy\":true}}],staticClass:\"input input-sm input-bordered\",class:{'input-error': errors.length !== 0},attrs:{\"disabled\":_vm.linkItem.online,\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"https://www.example.com\",\"required\":\"\"},domProps:{\"value\":(_vm.linkItem.link)},on:{\"blur\":function($event){return _vm.updateLink()},\"change\":function($event){return _vm.$set(_vm.linkItem, \"link\", $event.target.value)}}}),_c('div',[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(errors.length),expression:\"errors.length\"}],staticClass:\"badge badge-error mt-1 mr-1\"},[_vm._v(_vm._s(errors[0]))])])]}}])})],1),(_vm.linkItem.linkType === _vm.linkTypeEnum.media)?_c('div',[_c('label',{staticClass:\"inline-flex items-center\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.linkItem.mediaOpenType),expression:\"linkItem.mediaOpenType\"}],staticClass:\"form-radio radio-xs radio radio-primary\",attrs:{\"disabled\":_vm.linkItem.online,\"value\":\"EXT\",\"type\":\"radio\"},domProps:{\"checked\":_vm._q(_vm.linkItem.mediaOpenType,\"EXT\")},on:{\"change\":function($event){return _vm.$set(_vm.linkItem, \"mediaOpenType\", \"EXT\")}}}),_c('span',{staticClass:\"ml-2 text-xs\"},[_vm._v(\"外部連結\")])]),_c('label',{staticClass:\"inline-flex items-center ml-6\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.linkItem.mediaOpenType),expression:\"linkItem.mediaOpenType\"}],staticClass:\"form-radio radio-xs radio radio-primary\",attrs:{\"disabled\":_vm.linkItem.online,\"value\":\"INR\",\"type\":\"radio\"},domProps:{\"checked\":_vm._q(_vm.linkItem.mediaOpenType,\"INR\")},on:{\"change\":function($event){return _vm.$set(_vm.linkItem, \"mediaOpenType\", \"INR\")}}}),_c('span',{staticClass:\"ml-2 text-xs\"},[_vm._v(\"內嵌式開啟\")])])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <v-ob ref=\"vob\" tag=\"div\" class=\"p-2\">\n        <span v-show=\"linkItem.mediaName !== null && linkItem.mediaName !== ''\" class=\"badge badge-success text-xs mt-1 mr-1 mb-1\">偵測為 {{linkItem.mediaName}} 連結</span>\n        <div class=\"flex justify-center align-middle mb-3\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mr-1 h-5 w-5 mt-1 text-gray-600 fill-current cursor-pointer\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\" />\n            </svg>\n            <v-p v-slot=\"{ errors }\" rules=\"required\" name=\"連結名稱\" tag=\"div\" class=\"form-control w-full\">\n                <input\n                    v-model=\"linkItem.linkName\"\n                    :disabled=\"linkItem.online\"\n                    :class=\"{'input-error': errors.length !== 0}\"\n                    type=\"text\"\n                    autocomplete=\"off\"\n                    placeholder=\"連結名稱\"\n                    class=\"input input-sm input-bordered\">\n                <div>\n                    <span v-show=\"errors.length\" class=\"badge badge-error mt-1 mr-1\">{{ errors[0] }}</span>\n                </div>\n            </v-p>\n        </div>\n        <div class=\"flex justify-center align-middle mb-3\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mr-1 h-5 w-5 mt-1 text-gray-600 fill-current cursor-pointer\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path\n                    fill-rule=\"evenodd\"\n                    d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\"\n                    clip-rule=\"evenodd\"\n                />\n            </svg>\n            <v-p v-slot=\"{ errors }\" rules=\"required|url\" name=\"網址\" tag=\"div\" class=\"form-control w-full\">\n                <input\n                    @blur=\"updateLink()\"\n                    v-model.lazy=\"linkItem.link\"\n                    :disabled=\"linkItem.online\"\n                    :class=\"{'input-error': errors.length !== 0}\"\n                    type=\"text\"\n                    class=\"input input-sm input-bordered\"\n                    autocomplete=\"off\"\n                    placeholder=\"https://www.example.com\"\n                    required\n                />\n                <div>\n                    <span v-show=\"errors.length\" class=\"badge badge-error mt-1 mr-1\">{{ errors[0] }}</span>\n                </div>\n            </v-p>\n        </div>\n        <div v-if=\"linkItem.linkType === linkTypeEnum.media\">\n            <label class=\"inline-flex items-center\">\n                <input v-model=\"linkItem.mediaOpenType\" :disabled=\"linkItem.online\" value=\"EXT\" type=\"radio\" class=\"form-radio radio-xs radio radio-primary\" />\n                <span class=\"ml-2 text-xs\">外部連結</span>\n            </label>\n            <label class=\"inline-flex items-center ml-6\">\n                <input v-model=\"linkItem.mediaOpenType\" :disabled=\"linkItem.online\" value=\"INR\" type=\"radio\" class=\"form-radio radio-xs radio radio-primary\" />\n                <span class=\"ml-2 text-xs\">內嵌式開啟</span>\n            </label>\n        </div>\n    </v-ob>\n</template>\n\n<script>\nimport LinkItemVO from \"@/vo/design/linkItemList/LinkItemVO\";\nimport { CAN_USE_LINK_ITEM_NORMAL } from \"@/enum/permission/vBasic/VPermission\";\nimport { ValidationProvider as VP } from \"vee-validate\";\n\nimport { getOembedByUrl } from \"@/helper/urlEmbedParser\";\n\nimport {\n    linkType as linkTypeEnum,\n    linkArea as linkAreaEnum,\n    mediaOpenType as mediaOpenTypeEnum\n} from \"@/enum/vo/LinkItemEnum\";\n\n\nexport default {\n    components: {\n        VP,\n    },\n    data() {\n        return {\n            linkTypeEnum,\n            linkAreaEnum,\n            mediaOpenTypeEnum,\n            allowedMedia: ['YouTube', 'SoundCloud', 'Spotify']\n        }\n    },\n    props: {\n        linkItem: {\n            type: LinkItemVO,\n            required: true,\n        },\n        idx: {\n            type: Number,\n            required: true,\n        },\n        online: {\n            type: Boolean,\n            required: true\n        }\n    },\n    computed: {\n        modalName() {\n            return \"linkItem\" + this.idx;\n        },\n    },\n    methods: {\n        async validate() {\n\n            const rs = await this.$store.getters.hasPermission(CAN_USE_LINK_ITEM_NORMAL);\n            if(!rs) {\n                // todo ...\n                this.linkItem.online = false;\n                this.$emit('setParentOnline', false);\n                return\n            }\n\n            const result = await this.$refs.vob.validate();\n            if (!result) {\n                this.linkItem.online = false;\n                this.linkItem.valid = false;\n                this.$emit('setParentOnline', false);\n            } else {\n                this.linkItem.valid = true;\n                this.linkItem.online = true;\n                this.$emit('setParentOnline', true);\n            }\n        },\n        async updateLink() {\n\n            const rs = await getOembedByUrl(this.linkItem.link);\n\n            console.log(rs);\n\n            if(rs === null || !this.allowedMedia.includes(rs.provider_name)) {\n                this.linkItem.linkType = this.linkTypeEnum.normal;\n                this.linkItem.mediaOpenType = mediaOpenTypeEnum.ext;\n                this.linkItem.mediaName = null;\n            } else {\n                this.linkItem.linkType = this.linkTypeEnum.media;\n                this.linkItem.mediaName = rs.provider_name;\n                // this.linkItem.thumbnail = rs.thumbnail_url\n            }\n\n            // await this.validate();\n\n        },\n        updateImage(imageUrl) {\n            this.linkItem.thumbnail = imageUrl;\n        },\n    },\n    watch: {\n        online(nv, ov) {\n            if(nv) {\n                this.validate();\n            } else {\n                this.linkItem.online = false;\n            }\n        },\n    },\n    mounted() {\n        if(this.linkItem.online) {\n            this.validate();\n        }\n    },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkItemNormal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkItemNormal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LinkItemNormal.vue?vue&type=template&id=6fd2c052&scoped=true&\"\nimport script from \"./LinkItemNormal.vue?vue&type=script&lang=js&\"\nexport * from \"./LinkItemNormal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fd2c052\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}